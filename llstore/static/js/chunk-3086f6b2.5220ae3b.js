(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3086f6b2"],{"91dd":function(t,e,o){"use strict";function a(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,o,n){e=e||"&",o=o||"=";var l={};if("string"!==typeof t||0===t.length)return l;var s=/\+/g;t=t.split(e);var i=1e3;n&&"number"===typeof n.maxKeys&&(i=n.maxKeys);var c=t.length;i>0&&c>i&&(c=i);for(var u=0;u<c;++u){var p,d,f,m,v=t[u].replace(s,"%20"),b=v.indexOf(o);b>=0?(p=v.substr(0,b),d=v.substr(b+1)):(p=v,d=""),f=decodeURIComponent(p),m=decodeURIComponent(d),a(l,f)?r(l[f])?l[f].push(m):l[f]=[l[f],m]:l[f]=m}return l};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},b383:function(t,e,o){"use strict";e.decode=e.parse=o("91dd"),e.encode=e.stringify=o("e099")},dbf8:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-button",{attrs:{type:"success",size:"small"},on:{click:t.toAddHandler}},[t._v("添加")]),t._v(" "),o("el-button",{attrs:{type:"danger",size:"small"}},[t._v("批量删除")]),t._v(" "),o("el-table",{attrs:{data:t.products.list}},[o("el-table-column",{attrs:{prop:"id",label:"编号"}}),t._v(" "),o("el-table-column",{attrs:{prop:"name",label:"产品名称"}}),t._v(" "),o("el-table-column",{attrs:{prop:"price",label:"单价"}}),t._v(" "),o("el-table-column",{attrs:{prop:"description",label:"描述"}}),t._v(" "),o("el-table-column",{attrs:{prop:"categoryId",label:"所属分类"}}),t._v(" "),o("el-table-column",{attrs:{label:"照片",prop:"photo"},scopedSlots:t._u([{key:"default",fn:function(t){return[o("img",{attrs:{src:t.row.photo,width:"200",height:"200"}})]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("a",{attrs:{href:""},on:{click:function(o){return o.preventDefault(),t.toDeleteHandler(e.row.id)}}},[t._v("删除")]),t._v(" "),o("a",{attrs:{href:""},on:{click:function(o){return o.preventDefault(),t.toUpdateHandler(e.row)}}},[t._v("修改")])]}}])})],1),t._v(" "),o("el-pagination",{attrs:{layout:"prev, pager, next",total:t.products.total},on:{"current-change":t.pageChageHandler}}),t._v(" "),o("el-dialog",{attrs:{title:"录入产品信息",visible:t.visible,width:"60%"},on:{"update:visible":function(e){t.visible=e}}},[t._v("\n\n      -- "+t._s(t.form)+"\n      "),o("el-form",{attrs:{model:t.form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"产品名称"}},[o("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"单价"}},[o("el-input",{model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"所属栏目"}},[o("el-select",{model:{value:t.form.categoryId,callback:function(e){t.$set(t.form,"categoryId",e)},expression:"form.categoryId"}},t._l(t.options,(function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),o("el-form-item",{attrs:{label:"描述"}},[o("el-input",{attrs:{type:"textarea"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"图片"}},[o("el-upload",{staticClass:"upload-demo",attrs:{action:"http://134.175.154.93:6677/file/upload","file-list":t.fileList,"list-type":"picture","on-success":t.uploadSuccessHandler}},[o("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)],1),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:t.closeModalHandler}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.submitHandler}},[t._v("确 定")])],1)],1)],1)},r=[],n=o("b775"),l=o("b383"),s=o.n(l),i={methods:{uploadSuccessHandler:function(t){var e="http://134.175.154.93:8888/"+t.data.groupname+"/"+t.data.id;console.log(t),this.form.photo=e},pageChageHandler:function(t){this.params.page=t-1,this.loadData()},loadCategory:function(){var t=this,e="http://101.132.136.165:6677/product/findAll";n["a"].get(e).then((function(e){t.options=e.data}))},loadData:function(){var t=this;this.fileList=[];var e="http://101.132.136.165:6677/product/query";Object(n["a"])({url:e,method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:s.a.stringify(this.params)}).then((function(e){t.products=e.data}))},submitHandler:function(){var t=this;this.fileList=[];var e="http://101.132.136.165:6677/product/saveOrUpdate";Object(n["a"])({url:e,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:s.a.stringify(this.form)}).then((function(e){t.closeModalHandler(),t.loadData(),t.$message({type:"success",message:e.message})}))},toDeleteHandler:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var o="http://101.132.136.165:6677/product/deleteById?id="+t;n["a"].get(o).then((function(t){e.loadData(),e.$message({type:"success",message:t.message})}))}))},toUpdateHandler:function(t){this.form=t,this.visible=!0},closeModalHandler:function(){this.visible=!1},toAddHandler:function(){this.form={},this.visible=!0}},data:function(){return{visible:!1,fileList:[],products:[],options:[],form:{type:"product"},params:{page:0,pageSize:10}}},created:function(){this.loadData(),this.loadCategory()}},c=i,u=o("2877"),p=Object(u["a"])(c,a,r,!1,null,"42bead08",null);e["default"]=p.exports},e099:function(t,e,o){"use strict";var a=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,o,s){return e=e||"&",o=o||"=",null===t&&(t=void 0),"object"===typeof t?n(l(t),(function(l){var s=encodeURIComponent(a(l))+o;return r(t[l])?n(t[l],(function(t){return s+encodeURIComponent(a(t))})).join(e):s+encodeURIComponent(a(t[l]))})).join(e):s?encodeURIComponent(a(s))+o+encodeURIComponent(a(t)):""};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function n(t,e){if(t.map)return t.map(e);for(var o=[],a=0;a<t.length;a++)o.push(e(t[a],a));return o}var l=Object.keys||function(t){var e=[];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.push(o);return e}}}]);